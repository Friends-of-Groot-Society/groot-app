<!-- 
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ include file="../common/header.jspf"%>
<%@ include file="../common/navigation.jspf"%>
<%@ include file="../common/footer.jspf"%>
 -->
<!DOCTYPE html>

<head>
    <title>Project-1</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" />
    <link
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.1.3/css/bootstrap-datetimepicker.min.css"
        rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />

    <link href="proj1style.css" rel="stylesheet" />
    <link href="favicon.ico" rel="shortcut favicon" />
    <link href="favicon.ico" rel="shortcut favicon" type="text/html" />
    <!-- /project1/src/main/webapp/favicon.ico
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
   -->
    <style>
        footer.footer {
            width: 100%;
            position: absolute;
            bottom: 0;
        }
    </style>

</head>

<body onload="sessionInfo()">
    <nav class="navbar navbar-default">
        <ul class="nav navbar-nav  userdata-mid ">
            <li id="left-header">
                <span id="role">
                    <h3><strong><em>TRMS</em></strong></h3>
                </span>
                <span id="bal"></span>
            </li>
            <li class="active"><a href="request.html">REQUESTS</a>
            </li>
            <li><a href="admin.html">STATUS</a></li>
        </ul>

        <ul class="nav navbar-nav navbar-right  userdata">
            <li class="user ">
                <div class=" ">
                    <a href="request.html" class="pull-left">
                        <button class="btn btn-primary logout ">&nbsp;&nbsp;Reimburse
                            Me&nbsp;&nbsp;</button>&nbsp;&nbsp;&nbsp;</a>
                    <a onclick="logout()" href="login.html" class="pull-right">
                        <button class="btn btn-default logout">&nbsp;&nbsp;Sign Out&nbsp;&nbsp;</button>&nbsp;&nbsp;
                    </a>
                </div>

                <span>User</span><span class="id" id="headerId"> </span><br />
                <span>ID</span> <span class="id" id="userId"></span><br />
                <span>Dept</span> <span class="id" id="userDept"></span><br />
                <span>Super</span> <span class="id" id="userSuper"></span><br />
                </div>
            </li>
        </ul>
    </nav>
    <div class="container">
        <h3>REIMBURSEMENT FORM</h3>
        <div id="info" class="row">
            <div class="col col-xs-7">
                <h4 id="text">Event Name</h4>
                <input id="reqName" size="39" type="text">


                <h4 id="text">Event location</h4>
                <input id="reqPlace" size="39" type="text">


                <h4 id="text">Justification</h4>
                <textarea rows="4" cols="40" id="reqJustify"></textarea>

                <h4 id="text">Event Description</h4>
                <textarea rows="5" cols="40" id="reqDesc"></textarea>

            </div>
            <div class="col col-xs-5">

                <h4 id="text">Event Type</h4>
                <select id="reqType" type="select">
                    <option value=""> </option>
                    <option value="course">University Course-80%</option>
                    <option value="seminar">Seminar-60%</option>
                    <option value="certprep">Certification Prep-75%</option>
                    <option value="cert">Certification-100%</option>
                    <option value="techtrain">Technical Training-90%</option>
                    <option value="other">Other-30%</option>
                </select>

                <h4 id="text">Event Date &amp; Time</h4>
                <div style="max-width:170px;" class='input-group date' id='datetimepicker1'>
                    <input type='text' id='reqDatetime' class="form-control" />
                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>

                <h4 id="text">Evaluation Type</h4>
                <select id="reqGradeType" type="select">
                    <option value=""> </option>
                    <option value="present" title="Perform a presentation to management after the eventï¿½s completion and prior to awarded
reimbursement.">Presentation to Mgmt.</option>
                    <option value="testcustom">Passing Evaluation</option>
                    <option value="testdefault" title="Passing grade cutoff for the course">Default Evaluation</option>
                    <option value="emailapprove"
                        title="Email Approval from Supervisor, Dept. Head, or Benefits Coordinator" disabled>Management
                        Approval</option>
                </select>

                <h4 id="text">Passing Mark</h4>
                <input id="reqGradePass" type="text">

                <h4 id="text">Request Amount</h4>
                <input id="reqAmt" min="0" type="number">
                <hr>

                <button class="btn btn-primary" onclick="addRequest()">SUBMIT FORM</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div>
            <p>Project 1 Footer - Revature<br />
                <small>Copyright &copy; 2020 &nbsp;</small></p>
        </div>
    </footer>
    <div id="benco1">
        <div id="benco2">
            <div class="detail"></div>
        </div>
    </div>
</body>
<script src="proj1js.js"></script>
<script>

    let addRequest = function () {
        let r = document.getElementById("reqName");
        let reqName = ""; // declare & erase subsequent
        reqName += r.value; // append

        let ri = document.getElementById("reqType");
        let reqType; // just declare
        reqType = ri.value; // overwrite

        let rn = document.getElementById("reqDesc");
        let reqDesc;
        reqDesc = rn.value;


        let rj = document.getElementById("reqJustify");
        let reqJustify;
        reqJustify = rj.value;

        let rdt = document.getElementById("reqDatetime");
        let reqDatetime;
        reqDatetime = rdt.value;

        let rpl = document.getElementById("reqPlace");
        let reqPlace;
        reqPlace = rpl.value;


        let ret = document.getElementById("reqGradeType");
        let reqGradeType;
        reqGradeType = ret.value;

        let rgp = document.getElementById("reqGradePass");
        let reqGradePass;
        reqGradePass = rgp.value;

        let ra = document.getElementById("reqAmt");
        let reqAmt;
        reqAmt = ra.value;

        let xhttp = new XMLHttpRequest();

        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {

                console.log("readyState: " + this.readyState + ", status: " + this.status);
            }
        }
        let userId = getCookie("userid");
        xhttp.open("POST", "addRequest.do", true);
        let username = "placeUser";


        xhttp.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
        xhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhttp.send("username=" + username + "&userId=" + userId + "&reqName=" + reqName + "&reqType=" + reqType + "&reqDesc=" + reqDesc + "&reqJustify=" + reqJustify + "&reqDatetime=" + reqDatetime + "&reqPlace=" + reqPlace + "&reqGradeType=" + reqGradeType + "&reqGradePass=" + reqGradePass + "&reqAmt=" + reqAmt);
        console.log("Great, +" + username + "submitted; your reqName: #" + reqName + ", reqType: " + reqType + " reqDesc: *" + reqDesc + " reqJustify: *" + reqJustify + ", reqDatetime: " + reqDatetime + " reqPlace: *" + reqPlace + ", reqGradeType: " + reqGradeType + " reqGradePass: *" + reqGradePass + ", reqAmt: " + reqAmt);
        window.location.href = "index.html";

    }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js"></script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.1.3/js/bootstrap-datetimepicker.min.js"> </script>

<!-- 
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script src="webjars/jquery/1.9.1/jquery.min.js"></script>
<script src="webjars/bootstrap/3.3.6/js/bootstrap.min.js"></script>
 -->
<script>
    $(function () {
        var bindDatePicker = function () {
            $(".date").datetimepicker({
                format: 'YYYY-MM-DD',
                icons: {
                    time: "fa fa-clock-o",
                    date: "fa fa-calendar",
                    up: "fa fa-arrow-up",
                    down: "fa fa-arrow-down"
                }
            }).find('input:first').on("blur", function () {
                // check if the date is correct. We can accept dd-mm-yyyy and yyyy-mm-dd.
                // update the format if it's yyyy-mm-dd
                var date = parseDate($(this).val());

                if (!isValidDate(date)) {
                    //create date based on momentjs (we have that)
                    date = moment().format('YYYY-MM-DD');
                }

                $(this).val(date);
            });
        }

        var isValidDate = function (value, format) {
            format = format || false;
            // lets parse the date to the best of our knowledge
            if (format) {
                value = parseDate(value);
            }

            var timestamp = Date.parse(value);

            return isNaN(timestamp) == false;
        }

        var parseDate = function (value) {
            var m = value.match(/^(\d{1,2})(\/|-)?(\d{1,2})(\/|-)?(\d{4})$/);
            if (m)
                value = m[5] + '-' + ("00" + m[3]).slice(-2) + '-' + ("00" + m[1]).slice(-2);

            return value;
        }

        bindDatePicker();
    });

</script>

</HTML>